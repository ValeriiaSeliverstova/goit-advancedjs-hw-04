{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\naxios.defaults.params = {\n  key: '49479304-89a48f16eaa5319308b7de96a',\n  per_page: 15,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\n\nexport function showLoader() {\n  document.querySelector('.loader').style.display = 'block';\n}\n\nexport function hideLoader() {\n  document.querySelector('.loader').style.display = 'none';\n}\n\nexport async function fetchImages(query, page) {\n  showLoader();\n  try {\n    const { data } = await axios.get('', {\n      params: {\n        q: query,\n        page,\n      },\n    });\n    const totalPages = Math.ceil(\n      data.totalHits / axios.defaults.params.per_page\n    );\n    return {\n      images: data.hits,\n      totalPages,\n    };\n  } catch (error) {\n    console.error('Error fetching data: ', error);\n    throw error;\n  } finally {\n    hideLoader();\n  }\n}\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = null;\n\nexport function renderImages(images) {\n  if (!images || images.length === 0) {\n    return iziToast.error({\n      title: '',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }\n\n  const gallery = document.querySelector('.gallery');\n  const galleryMarkup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t<img\n\t\t\tclass=\"gallery-image\"\n\t\t\tsrc=\"${webformatURL}\"\n\t\t\talt=\"${tags}\"\n\t\t\t/>\n\t</a>\n    <div class=\"info\">\n        <div class=\"info-item\">\n            <h3>Likes</h3>\n            <p>${likes}</p>\n        </div>\n        <div class=\"info-item\">\n            <h3>Views</h3>\n            <p>${views}</p>\n        </div>\n        <div class=\"info-item\">\n            <h3>Comments</h3>\n            <p>${comments}</p>\n        </div>\n        <div class=\"info-item\">\n            <h3>Downloads</h3>\n            <p>${downloads}</p>\n        </div> \n    </div>\n</li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', galleryMarkup);\n\n  lightbox = new SimpleLightbox('.gallery-link', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    overlay: true,\n    overlayOpacity: 0.8,\n  });\n\n  lightbox.refresh();\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector('.form');\nconst input = document.querySelector('input[name=\"search-input\"]');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst gallery = document.querySelector('.gallery');\nlet currentPage = 1;\nlet query = '';\n\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n\n  query = input.value.trim();\n\n  if (!query) {\n    return iziToast.error({\n      title: '',\n      message: 'Please enter a search query!',\n    });\n  }\n\n  currentPage = 1;\n\n  fetchImages(query, currentPage)\n    .then(({ images, totalPages: fetchedTotalPages }) => {\n      renderImages(images);\n      console.log(fetchedTotalPages);\n      if (currentPage < fetchedTotalPages) {\n        loadMoreBtn.style.display = 'block';\n      } else {\n        loadMoreBtn.style.display = 'none';\n      }\n      const galleryItem = document.querySelector('.gallery-item');\n      const { height } = galleryItem.getBoundingClientRect();\n      window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth',\n      });\n    })\n    .catch(error => {\n      throw error.message;\n    });\n});\n\nloadMoreBtn.addEventListener('click', () => {\n  currentPage += 1;\n\n  fetchImages(query, currentPage)\n    .then(({ images, totalPages: fetchedTotalPages }) => {\n      renderImages(images);\n      if (currentPage < fetchedTotalPages) {\n        loadMoreBtn.style.display = 'block';\n      } else {\n        loadMoreBtn.style.display = 'none';\n        iziToast.info({\n          title: '',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n      const galleryItem = document.querySelector('.gallery-item');\n      const { height } = galleryItem.getBoundingClientRect();\n      window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth',\n      });\n    })\n    .catch(error => {\n      throw error.message;\n    });\n});\n"],"names":["axios","showLoader","hideLoader","fetchImages","query","page","data","totalPages","error","lightbox","renderImages","images","iziToast","gallery","galleryMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","searchForm","input","loadMoreBtn","currentPage","event","fetchedTotalPages","galleryItem","height"],"mappings":"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"}